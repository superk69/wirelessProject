webpackJsonp([1],{"7zck":function(e,t){throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: No PostCSS Config found in: /home/superk/git/wirelessProject/vueserver/node_modules/vuetify/dist\n    at config.load.then (/home/superk/git/wirelessProject/vueserver/node_modules/postcss-load-config/src/index.js:55:15)\n    at <anonymous>\n    at runLoaders (/home/superk/git/wirelessProject/vueserver/node_modules/webpack/lib/NormalModule.js:195:19)\n    at /home/superk/git/wirelessProject/vueserver/node_modules/loader-runner/lib/LoaderRunner.js:364:11\n    at /home/superk/git/wirelessProject/vueserver/node_modules/loader-runner/lib/LoaderRunner.js:230:18\n    at context.callback (/home/superk/git/wirelessProject/vueserver/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at Promise.resolve.then.then.catch (/home/superk/git/wirelessProject/vueserver/node_modules/postcss-loader/lib/index.js:194:71)\n    at <anonymous>")},"9TsF":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),i=a("kxiW"),o=a.n(i);const n=o.a.initializeApp({apiKey:"AIzaSyBnRd42ZFJc2A4lbkfnvnfCF8S-7xSGrbs",authDomain:"smartgrid-power-management.firebaseapp.com",databaseURL:"https://smartgrid-power-management.firebaseio.com",projectId:"smartgrid-power-management",storageBucket:"smartgrid-power-management.appspot.com",messagingSenderId:"925384727439"}),d=(n.database().ref().child("user"),new o.a.auth.GoogleAuthProvider);d.setCustomParameters({display:"popup"});const l=new o.a.auth.FacebookAuthProvider;l.addScope("public_profile"),l.setCustomParameters({display:"popup"});var r,c,v=a("mtWM"),h=a.n(v),_=a("WFgA"),u=a.n(_),p={data:()=>({e2:1,clipped:!1,login_dialog:!1,title:"SMARTGRID UBU",photoURL:"/static/avatar.png",uid:null,displayName:null,email:null,providerId:null,windowSize:{x:0,y:0},noti:null,len_noti:0}),name:"App",computed:{color(){switch(this.e2){case 0:return this.elColor="#607D8B","amber darken-2";case 1:return this.elColor="#009688","teal";case 2:return this.elColor="#795548","indigo darken-2";case 3:return this.elColor="#3F51B5","deep-orange darken-4"}},changedComponent(){this.$store.state.component!=this.e2&&(this.e2=this.$store.state.component)}},watch:{color:function(){this.swapComponent()}},methods:{onResize(){this.windowSize={x:window.innerWidth,y:window.innerHeight},this.$store.commit("updateSize",this.windowSize)},gotoConsole(e){h()({method:"POST",url:"http://"+this.$store.state.host+"/notification/"+this.email,data:{},headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(t=>{this.$store.commit("updateWatcher",e),this.$router.push("/console"),this.getNotifications(this.email)},e=>{console.error(e)})},swapComponent(){switch(this.$store.commit("updateColor",this.elColor),this.$store.commit("updateComponent",this.e2),this.e2){case 0:this.$router.replace("/global");break;case 1:this.$router.replace("/");break;case 2:this.$router.replace("/console");break;case 3:this.$router.replace("/Charts")}},Fsign(){o.a.auth().signInWithPopup(l).then(e=>{this.login_dialog=!1})},Gsign(){o.a.auth().signInWithPopup(d).then(e=>{this.login_dialog=!1;var t="http://"+this.$store.state.host+"/user";h()({method:"GET",url:t,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{})})},Logout(){n.auth().signOut();this.$store.commit("updateUser",[null,null,"/static/avatar.png",null,null]),this.photoURL=this.$store.state.photoURL,this.uid=this.$store.state.uid,this.displayName=this.$store.state.displayName,this.email=this.$store.state.email,this.providerId=this.$store.state.providerId,this.$router.replace("/")},getNotifications(e){var t="http://"+this.$store.state.host+"/notification/"+e;console.log(t),h()({method:"GET",url:t,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.noti=e.data,this.len_noti=u()(e.data)})}},mounted(){this.onResize();o.a.auth().onAuthStateChanged(e=>{if(e){var t=[e.email,e.displayName,e.photoURL,e.providerData[0].providerId,e.uid];console.log("user",t),this.$store.commit("updateUser",t),this.login_dialog=!1,this.photoURL=this.$store.state.photoURL,this.uid=this.$store.state.uid,this.displayName=this.$store.state.displayName,this.email=e.email,this.providerId=this.$store.state.providerId;var a="http://"+this.$store.state.host+"/user";h()({method:"POST",url:a,data:{displayname:this.displayName,email:this.email},headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{}),this.getNotifications(e.email),this.interval=setInterval(this.getNotifications(e.email),6e4)}else this.$router.replace("/"),this.login_dialog=!0})},created(){},beforeDestroy(){clearInterval(this.interval)}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{staticClass:"elevation-0",staticStyle:{"z-index":"99"},attrs:{app:"","clipped-left":!0,sticky:"",color:e.color,dark:""}},[""==e.$store.state.subtitle?a("v-toolbar-title",{domProps:{textContent:e._s(e.title)}}):e._e(),e._v(" "),""!=e.$store.state.subtitle?a("h1",[e._v(" @"+e._s(e.$store.state.subtitle))]):e._e(),e._v(" "),a("v-spacer"),e._v(" "),a("span",{staticClass:"hidden-sm-and-down",domProps:{textContent:e._s(e.$store.state.subtext)}}),e._v(" "),a("v-menu",{staticClass:"hidden-md-and-up",attrs:{bottom:"",left:""}},[a("v-btn",{attrs:{slot:"activator",icon:"",dark:""},slot:"activator"},[a("v-badge",{attrs:{left:"",color:"red"}},[e.len_noti>0?a("span",{attrs:{slot:"badge"},slot:"badge"},[e._v(e._s(e.len_noti))]):e._e(),e._v(" "),a("v-icon",[e._v("more")])],1)],1),e._v(" "),a("v-list",[a("v-list-tile",[a("v-avatar",{attrs:{size:"32px"}},[a("img",{attrs:{src:e.photoURL,alt:"profile_picture"}})]),e._v(" "),a("v-list-tile-title",[e._v("  "+e._s(e.displayName))])],1),e._v(" "),a("v-divider"),e._v(" "),e._l(e.noti,function(t){return a("v-list-tile",{key:t.device_id,attrs:{"text-xs-center":""},on:{click:function(a){e.gotoConsole(t.home_id)}}},[a("v-list-tile-title",[e._v("\n              อุปกรณ์ "+e._s(t.device_id)+" ขาดการเชื่อมต่อ\n            ")])],1)}),e._v(" "),a("v-divider"),e._v(" "),a("v-list-tile",{on:{click:e.Logout}},[a("v-list-tile-title",[a("span",{staticClass:"gray pink--text right"},[e._v("ออกจากระบบ")])])],1)],2)],1),e._v(" "),a("v-menu",{staticClass:"hidden-sm-and-down",attrs:{bottom:"",left:""}},[a("v-btn",{attrs:{slot:"activator",color:e.color},slot:"activator"},[a("v-badge",{attrs:{left:"",color:"red"}},[e.len_noti>0?a("span",{attrs:{slot:"badge"},slot:"badge"},[e._v(e._s(e.len_noti))]):e._e(),e._v(" "),a("span",[e._v(e._s(e.displayName)+"  ")]),e._v(" "),a("v-avatar",{attrs:{size:"32px"}},[a("img",{attrs:{src:e.photoURL,alt:"profile_picture"}})])],1)],1),e._v(" "),a("v-list",[a("v-list-tile",[a("v-list-tile-title",[e._v("  "+e._s(e.displayName))])],1),e._v(" "),a("v-divider"),e._v(" "),e._l(e.noti,function(t){return a("v-list-tile",{key:t.device_id,attrs:{"text-xs-center":""},on:{click:function(a){e.gotoConsole(t.home_id)}}},[a("v-list-tile-title",[e._v("\n              อุปกรณ์ "+e._s(t.device_id)+" ขาดการเชื่อมต่อ\n            ")])],1)}),e._v(" "),a("v-divider"),e._v(" "),a("v-list-tile",{on:{click:e.Logout}},[a("v-list-tile-title",[a("span",{staticClass:"gray pink--text right"},[e._v("ออกจากระบบ")])])],1)],2)],1)],1),e._v(" "),a("v-content",[e._v("\n    "+e._s(e.changedComponent)+"\n    "),a("router-view",{staticClass:"py-1 px-1"}),e._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition",overlay:!1},model:{value:e.login_dialog,callback:function(t){e.login_dialog=t},expression:"login_dialog"}},[a("v-card",{attrs:{transition:"slide-y-transition"}},[a("v-card-media",{attrs:{height:.33*this.$store.state.y,src:"/static/top.jpg"}}),e._v(" "),a("v-card-media",{staticClass:"text-xs-center",attrs:{height:.34*this.$store.state.y}},[a("v-flex",{staticClass:"text-xs-center"},[a("h1",{staticClass:"hidden-md-and-up"},[e._v("SMARTGRID UBU")]),a("br"),e._v(" "),a("h1",{staticClass:"hidden-sm-and-down"},[e._v("SMARTGRID POWER MANAGEMENT : UBU")]),a("br"),e._v(" "),a("v-btn",{staticClass:"elevation-0",attrs:{dark:"",large:"",color:"facebook"},on:{click:function(t){e.Fsign()}}},[a("v-icon",[e._v("fa-facebook")]),e._v("    Login With Facebook")],1),a("br"),e._v(" "),a("v-btn",{staticClass:"elevation-0",attrs:{large:"",color:"google"},on:{click:function(t){e.Gsign()}}},[a("v-icon",[e._v("fa-google")]),e._v("    Login With Google  ")],1)],1)],1),e._v(" "),a("v-card-media",{attrs:{height:.33*this.$store.state.y,bottom:"",src:"/static/btm.png"}})],1)],1)],1)],1),e._v(" "),a("v-bottom-nav",{attrs:{fixed:"",shift:"",value:!0,active:e.e2,color:e.color},on:{"update:active":function(t){e.e2=t}}},[a("v-btn",{attrs:{dark:""}},[a("span",[e._v("GLOBAL")]),e._v(" "),a("v-icon",[e._v("language")])],1),e._v(" "),a("v-btn",{attrs:{dark:""}},[a("span",[e._v("MY DASHBOARD")]),e._v(" "),a("v-icon",[e._v("dashboard")])],1),e._v(" "),a("v-btn",{attrs:{dark:""}},[a("span",[e._v("CONSOLE")]),e._v(" "),a("v-icon",[e._v("assessment")])],1),e._v(" "),a("v-btn",{attrs:{dark:""}},[a("span",[e._v("CHARTS")]),e._v(" "),a("v-icon",[e._v("account_box")])],1)],1)],1)},staticRenderFns:[]},b=a("VU/8")(p,m,!1,null,null,null).exports,f=a("/ocq"),g=a("2bpm"),x=a.n(g),y={name:"Dashboard",data(){return{dashboardObj:{home_id:null,home_name:null,home_location:{lat:null,lng:null},home_detail:null,member:[{email:this.$store.state.email}],weather:{province:null,station:null},device_list:[]},cards:[],Edit_home_device:[],completedalert:!1,putdata:[],deletedialog:!1,compare_delete:null,delete_id:null,dialog:!1,edit_dialog:!1,datalength:0,Province:[],StationNameTh:[],stack_email:[],device_list:[],memberlist:null,email:null,formRule:[e=>!!e||"กรุณากรอกข้อมูล"]}},methods:{goto(e){this.$router.push(e)},gotoConsole(e){this.$store.commit("updateWatcher",e),this.$router.push("/console")},deleteDashboard(e,t){0==t?(this.delete_id=e,this.compare_delete=null,this.deletedialog=!0):this.compare_delete==this.delete_id&&(this.putdata={home_id:e},console.log("dalete",this.putdata),h()({method:"DELETE",url:"http://"+this.$store.state.host+"/home",data:this.putdata,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.deletedialog=!1,this.onloadDashboard(this.email)},e=>{console.error(e)}))},preparecreateDashboard(){this.dashboardObj={home_id:null,home_name:null,home_location:{lat:null,lng:null},home_detail:null,member:[{email:this.$store.state.email}],weather:{province:null,station:null},device_list:[]},this.dashboardObj.home_id=x()(),this.stack_email=[],this.stack_email[0]=this.$store.state.email,h()({method:"GET",url:"http://"+this.$store.state.host+"/user/",headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.memberlist=e.data,this.dialog=!0},e=>{console.error(e)})},saveDashboard(){for(var e=Array(),t=0;t<u()(this.stack_email);t++)e.push({email:this.stack_email[t]});this.putdata={home_id:this.dashboardObj.home_id,home_name:this.dashboardObj.home_name,home_location:{lat:this.dashboardObj.home_location.lat,lng:this.dashboardObj.home_location.lng},home_detail:this.dashboardObj.home_detail,member:e,weather:{province:this.dashboardObj.weather.province,station:this.dashboardObj.weather.station},device_list:this.device_list},console.log("prepare put",this.putdata),h()({method:"PUT",url:"http://"+this.$store.state.host+"/home",headers:{"content-type":"application/json",Authorization:this.$store.state.token},data:this.putdata}).then(e=>{this.completedalert=!0,this.onloadDashboard(this.email)},e=>{console.error(e)})},saveEditDashboard(){for(var e=Array(),t=0;t<u()(this.stack_email);t++)e.push({email:this.stack_email[t]});this.putdata={home_id:this.dashboardObj.home_id,home_name:this.dashboardObj.home_name,home_location:{lat:this.dashboardObj.home_location.lat,lng:this.dashboardObj.home_location.lng},home_detail:this.dashboardObj.home_detail,member:e,weather:{province:this.dashboardObj.weather.province,station:this.dashboardObj.weather.station},device_list:this.device_list},console.log("prepare put",this.putdata),h()({method:"POST",url:"http://"+this.$store.state.host+"/home",data:this.putdata,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.responses=e.data,this.onloadDashboard(this.email)},e=>{console.error(e)})},getStations(e){h()({method:"GET",url:"http://"+this.$store.state.host+"/getStations/"+e,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.StationNameTh=e.data},e=>{console.error(e)})},PrePereEdit(e){h()({method:"GET",url:"http://"+this.$store.state.host+"/edithome/"+e,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{console.log("dtar",e.data),this.dashboardObj.weather.province=e.data[0].weather.province,this.dashboardObj.home_id=e.data[0].home_id,this.dashboardObj.home_name=e.data[0].home_name,this.dashboardObj.home_location.lat=e.data[0].home_location.lat,this.dashboardObj.home_location.lng=e.data[0].home_location.lng,this.dashboardObj.home_detail=e.data[0].home_detail;var t=e.data[0].member.length;this.device_list=e.data[0].device_list,this.dashboardObj.weather.station=e.data[0].weather.station;for(var a=0;a<t;a++)this.stack_email[a]=e.data[0].member[a].email;console.log("email",this.stack_email),h()({method:"GET",url:"http://"+this.$store.state.host+"/getStations/"+e.data[0].weather.province,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.StationNameTh=e.data},e=>{console.error(e)}),h()({method:"GET",url:"http://"+this.$store.state.host+"/user/",headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.memberlist=e.data},e=>{console.error(e)}),this.edit_dialog=!0},e=>{console.error(e)})},onloadDashboard(e){var t="http://"+this.$store.state.host+"/home/"+e;console.log("dashboard onload url",t),h()({method:"GET",url:t,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.datas=e.data,this.datalength=e.data.length,this.cards=[],console.log("data",e.data);for(var t=0;t<u()(e.data);t++)e.data[t].picture="/static/cover.jpg",this.cards.push(e.data[t])},e=>{console.error(e)}),h()({method:"GET",url:"http://"+this.$store.state.host+"/weatherlocation/",headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.Province=e.data},e=>{console.error(e)})}},mounted(){n.auth().onAuthStateChanged(e=>{if(e){var t=[e.email,e.displayName,e.photoURL,e.providerData[0].providerId];console.log("dashbaord user",t),this.$store.commit("updateUser",t),this.email=t[0],this.onloadDashboard(this.email)}})},created(){this.$store.commit("updatesubTitle",""),this.$store.commit("updatesubText",""),this.$store.commit("updateComponent",1),document.head.querySelector("meta[name=theme-color]").content=this.$store.state.color_component,console.log("changed",this.$store.state.color_component)}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",[a("v-snackbar",{attrs:{timeout:6e3,top:!0,value:e.completedalert}},[e._v("\n      สร้างแดชบอร์ดสำเร็จ\n      "),a("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){e.completedalert=!1}}},[e._v("Close")])],1),e._v(" "),a("v-card",{staticClass:"mb-2 mt-0 pt-1 offline elevation-0",staticStyle:{height:"30px"},attrs:{dark:""}},[a("v-card-text",{staticClass:"pt-0 teal--text"},[e._v("DASHBOARD")]),e._v(" "),a("v-btn",{staticClass:"pr-0",attrs:{absolute:"",dark:"",fab:"",bottom:"",right:"",color:"teal"},on:{click:e.preparecreateDashboard}},[a("v-icon",[e._v("add")])],1)],1),e._v(" "),0==e.cards.length?a("v-container",[a("v-layout",{attrs:{row:"",warp:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("v-alert",{attrs:{value:!0,type:"error"}},[e._v("\n      ดูเหมือนคุณยังไม่มี DASHBOARD เลย กด + เพื่อเพิ่ม\n    ")])],1)],1)],1):e._e(),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.cards,function(t){return a("v-flex",{key:t.title,attrs:{lg4:"",md4:"",xs12:"",sm12:""}},[a("v-card",[a("v-card-media",{attrs:{src:t.picture,height:"100px"}},[a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{attrs:{xs12:"","align-end":"",flexbox:""}},[a("span",{staticClass:"headline white--text",domProps:{textContent:e._s(t.home_name)}})])],1)],1)],1),e._v(" "),a("v-card-title",[a("v-flex",{attrs:{xs12:""}},[a("span",{staticClass:"grey--text"},[e._v(e._s(t.weather.province))]),a("br"),e._v(" "),a("span",[e._v(e._s(t.home_detail))]),e._v(" "),a("v-divider")],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{dark:"",small:"",color:"black"},on:{click:function(a){e.gotoConsole(t.home_id)}}},[e._v("ไปที่ Console")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",drak:"",small:"",color:"black"},on:{click:function(a){e.PrePereEdit(t.home_id)}},model:{value:t.home_id,callback:function(a){e.$set(t,"home_id",a)},expression:"card.home_id"}},[e._v("แก้ใข")]),e._v(" "),a("v-btn",{attrs:{flat:"",small:"",color:"red"},on:{click:function(a){e.deleteDashboard(t.home_id,!1)}},model:{value:t.home_id,callback:function(a){e.$set(t,"home_id",a)},expression:"card.home_id"}},[e._v("ลบ")])],1)],1)],1)}))],1),e._v(" "),a("br"),a("br"),a("br"),e._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.edit_dialog,callback:function(t){e.edit_dialog=t},expression:"edit_dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("แก้ใขแดชบอร์ด")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{box:"",label:"หมายเลขแดชบอร์ด",readonly:"",required:""},model:{value:e.dashboardObj.home_id,callback:function(t){e.$set(e.dashboardObj,"home_id",t)},expression:"dashboardObj.home_id"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{box:"",label:"ชื่อแดชบอร์ด",hint:"กรอกชื่อแดชบอร์ด เช่น บ้าน ที่ทำงาน",required:""},model:{value:e.dashboardObj.home_name,callback:function(t){e.$set(e.dashboardObj,"home_name",t)},expression:"dashboardObj.home_name"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{box:"",label:"ละติจูด",hint:"ละติจูดตำแหน่งที่ตั้งของแดชบอร์ด",required:""},model:{value:e.dashboardObj.home_location.lat,callback:function(t){e.$set(e.dashboardObj.home_location,"lat",t)},expression:"dashboardObj.home_location.lat"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{box:"",label:"ลองติจูด",hint:"ลองติจูดตำแหน่งที่ตั้งของแดชบอร์ด",required:""},model:{value:e.dashboardObj.home_location.lng,callback:function(t){e.$set(e.dashboardObj.home_location,"lng",t)},expression:"dashboardObj.home_location.lng"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{textarea:"",label:"รายละเอียดแดชบอร์ด"},model:{value:e.dashboardObj.home_detail,callback:function(t){e.$set(e.dashboardObj,"home_detail",t)},expression:"dashboardObj.home_detail"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{label:"สมาชิกในแดชบอร์ด",multiple:"",autocomplete:"",chips:"",required:"",items:e.memberlist},model:{value:e.stack_email,callback:function(t){e.stack_email=t},expression:"stack_email"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{label:"จังหวัด",required:"",items:e.Province},on:{change:e.getStations},model:{value:e.dashboardObj.weather.province,callback:function(t){e.$set(e.dashboardObj.weather,"province",t)},expression:"dashboardObj.weather.province"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{label:"สถานี",required:"",items:e.StationNameTh},model:{value:e.dashboardObj.weather.station,callback:function(t){e.$set(e.dashboardObj.weather,"station",t)},expression:"dashboardObj.weather.station"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(t){e.edit_dialog=!1}}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.saveEditDashboard},nativeOn:{click:function(t){e.edit_dialog=!1}}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("สร้างแดชบอร์ด")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{box:"",label:"หมายเลขแดชบอร์ด",readonly:"",required:""},model:{value:e.dashboardObj.home_id,callback:function(t){e.$set(e.dashboardObj,"home_id",t)},expression:"dashboardObj.home_id"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{rules:e.formRule,box:"",label:"ชื่อแดชบอร์ด",hint:"กรอกชื่อแดชบอร์ด เช่น บ้าน ที่ทำงาน",required:""},model:{value:e.dashboardObj.home_name,callback:function(t){e.$set(e.dashboardObj,"home_name",t)},expression:"dashboardObj.home_name"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{rules:e.formRule,box:"",label:"ละติจูด",hint:"ละติจูดตำแหน่งที่ตั้งของแดชบอร์ด",required:""},model:{value:e.dashboardObj.home_location.lat,callback:function(t){e.$set(e.dashboardObj.home_location,"lat",t)},expression:"dashboardObj.home_location.lat"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{rules:e.formRule,box:"",label:"ลองติจูด",hint:"ลองติจูดตำแหน่งที่ตั้งของแดชบอร์ด",required:""},model:{value:e.dashboardObj.home_location.lng,callback:function(t){e.$set(e.dashboardObj.home_location,"lng",t)},expression:"dashboardObj.home_location.lng"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{textarea:"",label:"รายละเอียดแดชบอร์ด"},model:{value:e.dashboardObj.home_detail,callback:function(t){e.$set(e.dashboardObj,"home_detail",t)},expression:"dashboardObj.home_detail"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{box:"",rules:e.formRule,label:"สมาชิกในแดชบอร์ด",multiple:"",autocomplete:"",chips:"",required:"",items:e.memberlist},model:{value:e.stack_email,callback:function(t){e.stack_email=t},expression:"stack_email"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{box:"",label:"จังหวัด",rules:e.formRule,required:"",items:e.Province},on:{change:e.getStations},model:{value:e.dashboardObj.weather.province,callback:function(t){e.$set(e.dashboardObj.weather,"province",t)},expression:"dashboardObj.weather.province"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{box:"",label:"สถานี",required:"",items:e.StationNameTh},model:{value:e.dashboardObj.weather.station,callback:function(t){e.$set(e.dashboardObj.weather,"station",t)},expression:"dashboardObj.weather.station"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.saveDashboard},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deletedialog,callback:function(t){e.deletedialog=t},expression:"deletedialog"}},[a("v-card",[a("v-card-title",[e._v('\n            กรุณากรอกข้อความ "'+e._s(e.delete_id)+'" เพื่อยืนยันการลบ\n          ')]),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"กรอกรหัสเพื่อยืนยันการลบ",required:""},model:{value:e.compare_delete,callback:function(t){e.compare_delete=t},expression:"compare_delete"}})],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"black",flat:""},on:{click:function(t){t.stopPropagation(),e.deletedialog=!1}}},[e._v("Close")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.deleteDashboard(e.delete_id,!0)}}},[e._v("ลบแดชบอร์อด")])],1)],1)],1)],1)},staticRenderFns:[]},j=a("VU/8")(y,k,!1,null,null,null).exports,C=a("PJh5"),w=a.n(C),$=a("M4fF"),O=a.n($),S={name:"Charts",data:()=>({selectAble:!1,cards:[],io:null,picker:null,picker2:null,e1:null,id_list:[],history:[],search:"",headers:[{text:"วันที่เก็บข้อมูล",value:"name"},{text:"ค่าที่บันทึก",value:"calories"}],json_fields:{device_id:"device_id",date_added:"date_added",Value:"value"},json_meta:[[{key:"charset",value:"utf-8"}]]}),mounted(){n.auth().onAuthStateChanged(e=>{if(e){var t=[e.email,e.displayName,e.photoURL,e.providerData[0].providerId,e.uid];console.log("user",t),this.$store.commit("updateUser",t),""==this.$store.state.home_id&&this.$router.replace("/"),this.$store.commit("updatesubTitle",this.store.state.home_id+" ข้อมูลสรุปผล"),this.$store.commit("updatesubText","")}else this.$router.replace("/"),this.login_dialog=!0});this.windowSize={x:window.innerWidth,y:window.innerHeight};var e="http://"+this.$store.state.host+"/console/"+this.$store.state.home_id;h()({method:"GET",url:e,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{console.log("card",e);for(var t=0;t<u()(e.data);t++)this.id_list[t]=e.data[t].device_id,this.cards.push({id:e.data[t].device_id,unitname:e.data[t].device_unitname,date_added:e.data[t].date_added,title:e.data[t].device_name,type:e.data[t].device_type,device_token:e.data[t].device_token});this.selectAble=!0},e=>{console.error(e)}),this.add(this.$store.state.home_id);var t=this;r.on("graph",function(e){var a=[];e.forEach(e=>{var t=[];e.forEach(e=>{t.push({value:e.value,date_added:e.date_added})});var s=e[0].device_id;a[s]=t}),t.io=a,google.charts.load("current",{packages:["corechart","line"]}),google.charts.setOnLoadCallback(t.drawLogScales)})},computed:{},methods:{drawLogScales(){console.log("draw",this.io);var e={height:200,hAxis:{title:"เวลา",logScale:!0},vAxis:{title:"ค่าต่ำสุด-สูงสุด",logScale:!1},colors:["#a52714","#097138"]};for(var t in this.io){console.log("data",this.io[t]);var a=[];a.push(["เวลา",t]);for(var s=0;s<this.io[t].length;s++)a.push([this.io[t][s].date_added.split(" ")[1].split(":")[0]+" : "+this.io[t][s].date_added.split(" ")[1].split(":")[1],0==this.io[t][s].value||1==this.io[t][s].value?0:this.io[t][s].value]);console.log("innserdata",a);var i=google.visualization.arrayToDataTable(a);console.log(t);var o=t.toString();document.getElementById(o).innerHTML="",new google.visualization.ColumnChart(document.getElementById(o)).draw(i,e)}},add(e){r=io.connect("http://"+this.$store.state.host),console.log("emitting"),r.emit("ongraph",e)},callHistory(){this.e1;this.history=[],h()({method:"GET",url:"http://"+this.$store.state.host+"/history/"+this.e1,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{console.log("result",e.data[0].device_id),this.history=e.data},e=>{console.error(e)})}},created(){this.$store.commit("updateComponent",3),document.head.querySelector("meta[name=theme-color]").content=this.$store.state.color_component,console.log("changed",this.$store.state.color_component)},beforeDestroy(){console.log("close socket"),r.disconnect()}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",[a("v-container",{staticClass:"lighten-4 innerstyle",attrs:{"fill-height":"",fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("h3",{staticClass:"grayz--text"},[e._v("กราฟแสดงข้อมูลย้อนหลังของเซ็นเซอร์แต่ละตัว")])]),e._v(" "),e._l(e.cards,function(t){return a("v-flex",{key:t.name,attrs:{lg6:"",md6:"",xs12:"",sm12:""}},[a("span",[e._v(e._s(t.name))]),e._v(" "),a("v-card",{attrs:{id:t.id}})],1)})],2)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-container",{staticClass:"lighten-4 innerstyle",attrs:{"fill-height":"",fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("h3",{staticClass:"grayz--text"},[e._v("เรียกข้อมูลย้อนหลังของเซ็นเซอร์แต่ละตัว")])]),e._v(" "),a("v-flex",{attrs:{xs12:"",md8:""}},[e.selectAble?a("v-select",{attrs:{items:e.id_list,label:"เลือกอุปกรณ์ที่ต้องการดูประวัติ","single-line":""},model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md2:""}},[a("v-btn",{attrs:{block:"",color:"deep-orange darken-4",dark:""},on:{click:function(t){e.callHistory()}}},[e._v("เรียกข้อมูล")])],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md2:""}},[a("download-excel",{staticClass:"btn btn-deep-orange darken-4 block",attrs:{color:"deep-orange darken-4",data:e.history,fields:e.json_fields,name:"filename.xls"}},[e._v("    ดาวน์โหลดเป็นไฟล์ excel    ")])],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-container",{staticClass:"lighten-4 innerstyle",attrs:{"fill-height":"",fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",warp:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.history},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n                    "+e._s(t.header.text)+"\n                  ")]),e._v(" "),a("span",[e._v("\n                    "+e._s(t.header.text)+"\n                  ")])])]}},{key:"items",fn:function(t){return[a("td",{attrs:{xs12:""}},[e._v(e._s(t.item.date_added))]),e._v(" "),a("td",{staticClass:"text-xs-right",attrs:{xs12:""}},[e._v(e._s(t.item.value))])]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n                  Your search for "'+e._s(e.search)+'" found no results.\n                ')])],1)],1)],1),e._v(" "),a("br"),a("br"),a("br"),a("br")],1)},staticRenderFns:[]},P=a("VU/8")(S,z,!1,null,null,null).exports,E={name:"Console",data:()=>({index:0,dialog:!1,edit_dialog:!1,detail_dialog:!1,displayname:"",cardColor:"white",photoURL:"",home_id:"",home_data:[],io:null,createdevice:[{home_id:null,device_id:null,device_name:null,device_type:null,device_unitname:null,deletedialog:!1,compare_delete:null,delete_id:null,device_added:null,device_public:null}],windowSize:{x:0,y:0},device_type_list:["แบตเตอรี่","สวิตซ์","อุปกรณ์ไฟฟ้า","อุณภูมิ","ความชื้น","เซ็นเซอร์วัดแสง","แผงโซล่าเซลล์"],device_public_list:["สาธารณะ","ส่วนตัว"],interval:[],value:[],control_value:100,cards:[],topcards:[],now:w()().format("HH:mm"),PA:""}),methods:{getDateFromNow:e=>w()(e).fromNow(),updateState(e,t){var a;a=!t||null==t,console.log("updatestate",a,"to",e),h()({method:"post",url:"http://"+this.$store.state.host+"/state",data:{home_id:this.$store.state.home_id,device_id:e,value:a},headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{})},colorMonitor(e,t){let a;return e>75?a="red":e>50?a="orange":e>25?a="yellow":e>0&&(a="green"),t||(a="offline"),a},colorSwitch(e,t){let a;return a=e?"red":"grayz",t||(a="offline"),a},preparing_homedata(e){this.topcards=[],this.cards=[],console.log("home_id",e),this.home_id=e,h()({method:"GET",url:"http://"+this.$store.state.host+"/edithome/"+e,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.home_data.push(e.data[0]),this.createdevice.device_id=x()(),this.$store.commit("updatesubTitle",e.data[0].home_name),this.$store.commit("updatesubText",e.data[0].home_detail);var t="http://"+this.$store.state.host+"/gettempdata/"+this.home_data[0].weather.province+"/"+this.home_data[0].weather.station;h()({method:"GET",url:t,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{console.log(t,"weather",e),this.topcards.push({title:"อุณหภูมิ",type:"แสดงข้อมูล",unitname:"องศาเซลเซียส",value:e.data[0].Observe.Temperature.Value,picture:"/static/sunset.jpg"}),this.topcards.push({title:"ความชื้นสัมพัทธ์",type:"แสดงข้อมูล",unitname:"เปอร์เซ็นต์",value:e.data[0].Observe.RelativeHumidity.Value,picture:"/static/humidity.jpg"}),this.topcards.push({title:"ปริมาณน้ำฝน",type:"แสดงข้อมูล",unitname:"มิลิมิเมตร",value:e.data[0].Observe.Rainfall.Value,picture:"/static/rain.jpg"});var a="http://"+this.$store.state.host+"/console/"+this.home_id;h()({method:"GET",url:a,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{console.log("card",e);for(var t=0;t<u()(e.data);t++)this.cards.push({id:e.data[t].device_id,unitname:e.data[t].device_unitname,date_added:e.data[t].date_added,title:e.data[t].device_name,type:e.data[t].device_type,device_token:e.data[t].device_token})},e=>{console.error(e)})},e=>{console.error(e)})},e=>{console.error(e)})},viewdetail(e){var t="http://"+this.$store.state.host+"/getdevice/"+e;h()({method:"GET",url:t,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{console.log("device",e.data),this.createdevice=[],this.createdevice.home_id=e.data[0].home_id,this.createdevice.device_id=e.data[0].device_id,this.createdevice.device_name=e.data[0].device_name,this.createdevice.device_type=e.data[0].device_type,this.createdevice.device_unitname=e.data[0].device_unitname,this.createdevice.device_added=e.data[0].device_added,this.createdevice.device_public=e.data[0].device_public,this.createdevice.device_token=e.data[0].device_token},e=>{console.error(e)}),this.detail_dialog=!0},createDevice(){var e="http://"+this.$store.state.host+"/createjwt/";h()({method:"POST",url:e,data:{email:this.$store.state.email},headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.createdevice.device_token=e.data.token,this.createdevice.device_added=new Date,this.createdevice.home_id=this.home_id;var t={home_id:this.createdevice.home_id,device_id:this.createdevice.device_id,device_name:this.createdevice.device_name,device_type:this.createdevice.device_type,device_unitname:this.createdevice.device_unitname,device_added:this.createdevice.device_added,device_public:this.createdevice.device_public,device_token:this.createdevice.device_token};console.log("putting",t),h()({method:"PUT",url:"http://"+this.$store.state.host+"/console",data:t,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.createdevice=[{home_id:null,device_id:null,device_name:null,device_type:null,device_unitname:null,device_added:null,device_public:null,device_token:null}],this.createdevice.device_id=x()(),this.preparing_homedata(this.home_id)},e=>{console.error(e)})})},prepareeditConsole(e){var t="http://"+this.$store.state.host+"/getdevice/"+e;h()({method:"GET",url:t,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{console.log("device",e.data),this.createdevice=[],this.createdevice.home_id=e.data[0].home_id,this.createdevice.device_id=e.data[0].device_id,this.createdevice.device_name=e.data[0].device_name,this.createdevice.device_type=e.data[0].device_type,this.createdevice.device_unitname=e.data[0].device_unitname,this.createdevice.device_added=e.data[0].device_added,this.createdevice.device_public=e.data[0].device_public,this.createdevice.device_token=e.data[0].device_token},e=>{console.error(e)}),this.edit_dialog=!0},editDevice(){var e={home_id:this.createdevice.home_id,device_id:this.createdevice.device_id,device_name:this.createdevice.device_name,device_type:this.createdevice.device_type,device_unitname:this.createdevice.device_unitname,device_added:this.createdevice.device_added,device_public:this.createdevice.device_public,device_token:this.createdevice.device_token};console.log(e),h()({method:"POST",url:"http://"+this.$store.state.host+"/console",data:e,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.preparing_homedata(this.home_id),this.createdevice=[]},e=>{console.error(e)})},deleteConsole(e,t){0==t?(this.delete_id=e,this.compare_delete=null,this.deletedialog=!0):this.compare_delete==this.delete_id&&(this.putdata={device_id:e},console.log("dalete",this.putdata),h()({method:"DELETE",url:"http://"+this.$store.state.host+"/console",data:this.putdata,headers:{"content-type":"application/json",Authorization:this.$store.state.token}}).then(e=>{this.deletedialog=!1,this.preparing_homedata(this.home_id)},e=>{console.error(e)}))},add(e){c=io.connect("http://"+this.$store.state.host),console.log("emitting"),c.emit("realtimedatalog",e)},time(){this.PA=w()().format("a"),this.now=w()().format("HH:mm")},oncolor:e=>"แบตเตอรี่"==e?"pink darken-3":"แผงโซล่าเซลล์"==e?"purple darken-2":"อุปกรณ์ไฟฟ้า"==e?"teal darken-1":"สวิตซ์"==e?"deep-orange darken-4":"อุณภูมิ"==e?"red darken-1":"ความชื้น"==e?"red darken-1":"เซ็นเซอร์วัดแสง"==e?"red darken-1":void 0},mounted(){n.auth().onAuthStateChanged(e=>{if(e){var t=[e.email,e.displayName,e.photoURL,e.providerData[0].providerId,e.uid];console.log("user",t),this.$store.commit("updateUser",t),""==this.$store.state.home_id&&this.$router.replace("/")}else this.$router.replace("/"),this.login_dialog=!0});this.preparing_homedata(this.$store.state.home_id),this.interval=setInterval(this.time,6e4),this.windowSize={x:window.innerWidth,y:window.innerHeight},this.add(this.$store.state.home_id);var e=this;c.on("outputlog",function(t){e.io=t})},beforeCreate(){c=io.connect("http://"+this.$store.state.host)},created(){this.$store.commit("updateComponent",2),document.head.querySelector("meta[name=theme-color]").content="brown",console.log("changed",this.$store.state.color_component)},beforeDestroy(){console.log("close socket"),c.disconnect(),clearInterval(this.interval)},computed:{orderedDevice_id:function(){return O.a.orderBy(this.io,"device_id")},onresize(){return this.windowSize.y/4}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",[a("v-flex",[a("v-container",{staticClass:"lighten-4 innerstyle h-100",attrs:{"fill-height":"",fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[e._l(e.topcards,function(t){return a("v-flex",{key:t.title,attrs:{lg3:"",md3:"",xs6:"",sm6:"","text-xs-center":""}},[a("v-card",[a("v-card-media",{attrs:{height:"110px",src:t.picture}},[a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{attrs:{xs12:"","text-xs-center":"",flexbox:""}},["แสดงข้อมูล"==t.type?a("div",[a("span",{staticClass:"topic white--text",domProps:{textContent:e._s(t.title)}}),a("br"),e._v(" "),a("h1",{staticClass:"display-1 white--text"},[e._v(e._s(t.value))]),e._v(" "),a("v-divider"),e._v(" "),a("span",{staticClass:"caption white--text"},[e._v(e._s(t.unitname))])],1):e._e()])],1)],1)],1)],1)],1)}),e._v(" "),a("v-flex",{attrs:{lg3:"",md3:"",xs6:"",sm6:"","text-xs-center":""}},[a("v-card",[a("v-card-media",{attrs:{height:"110px",src:"/static/time.jpg"}},[a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{attrs:{xs12:"","text-xs-center":"",flexbox:""}},[a("span",{staticClass:"topic white--text"},[e._v("เวลา")]),a("br"),e._v(" "),a("h1",{staticClass:"display-1 white--text"},[e._v(e._s(e.now))]),e._v(" "),a("v-divider"),e._v(" "),a("span",{staticClass:"caption white--text"},[e._v("นาที")])],1)],1)],1)],1)],1)],1)],2)],1),e._v(" "),a("v-container",{staticClass:"lighten-4 innerstyle h-100",attrs:{"fill-height":"",fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.orderedDevice_id,function(t){return a("v-flex",{key:t.index,attrs:{lg3:"",md3:"",xs6:"",sm6:""}},[a("v-card",{attrs:{dark:"",color:e.oncolor(t.device_type)}},[a("v-card-media",{attrs:{height:e.onresize}},[a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{attrs:{xs12:"","text-xs-center":"",flexbox:""}},["อุปกรณ์ไฟฟ้า"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-lightbulb")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"headline hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"แบตเตอรี่"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-battery-three-quarters")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"headline hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"แผงโซล่าเซลล์"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("far fa-sun")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-2 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"อุณภูมิ"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-thermometer-empty")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-2 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"เซ็นเซอร์วัดแสง"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-sun")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-2 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"ความชื้น"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-thermometer-empty")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-2 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"สวิตซ์"==t.device_type?a("div",[a("span",{attrs:{color:e.colorSwitch(t.value,t.device_status)}},[e._v(e._s(t.device_name))]),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("br"),a("br"),e._v(" "),t.device_status?a("v-btn",{staticClass:"elevation-0",attrs:{large:"",dark:"",color:e.colorSwitch(t.value,t.device_status)},on:{click:function(a){e.updateState(t.device_id,t.value)}}},[t.value?a("h1",[e._v("เปิด")]):e._e(),e._v(" "),t.value?e._e():a("h1",[e._v("ปิด")])]):e._e(),e._v(" "),a("br"),e._v(" "),"none"!=t.prediction&&t.device_status?a("span",[e._v("ระบบแนะนำให้ : "),"false"==t.prediction?a("h1",{staticClass:"headline"},[e._v("เปิด")]):e._e(),"true"==t.prediction?a("h1",{staticClass:"headline"},[e._v("ปิด")]):e._e()]):e._e(),e._v(" "),a("br"),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1):e._e()])],1)],1)],1),e._v(" "),a("v-card-actions",{staticClass:"dark"},[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(a){e.viewdetail(t.device_id)}}},[a("v-icon",{attrs:{color:"offline"}},[e._v("fas fa-comment-alt")])],1),e._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(a){e.prepareeditConsole(t.device_id)}}},[a("v-icon",{attrs:{color:"offline"}},[e._v("fas fa-cogs")])],1),e._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(a){e.deleteConsole(t.device_id,!1)}}},[a("v-icon",{attrs:{color:"offline"}},[e._v("fas fa-minus-circle")])],1)],1)],1)],1)}))],1),e._v(" "),a("v-container",{staticClass:"lighten-4 innerstyle offline h-100",staticStyle:{height:"60px"},attrs:{fluid:"","grid-list-md":"",dark:""}},[a("v-layout",{attrs:{row:"",wrap:"",xs12:"",md12:"",sm12:"",lg12:""}},[a("v-btn",{staticClass:"pr-0 pt-0",attrs:{absolute:"",dark:"",fab:"",buttom:"",right:"",color:"brown"},on:{click:function(t){e.dialog=!0}}},[a("v-icon",[e._v("add")])],1)],1)],1),e._v(" "),a("br"),a("br"),a("br")],1),e._v(" "),a("v-flex",[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-divider"),e._v(" "),a("v-card-title",[a("span",{staticClass:"headline black--text"},[e._v("เพิ่มอุปกรณ์")])]),e._v(" "),a("v-divider"),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"หมายเลขอุปกรณ์",readonly:"",required:""},model:{value:e.createdevice.device_id,callback:function(t){e.$set(e.createdevice,"device_id",t)},expression:"createdevice.device_id"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"ชื่ออุปกรณ์",hint:"กรอกชื่อแดชบอร์ด เช่น บ้าน ที่ทำงาน",required:""},model:{value:e.createdevice.device_name,callback:function(t){e.$set(e.createdevice,"device_name",t)},expression:"createdevice.device_name"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"หน่วยของข้อมูล",hint:"ละติจูดตำแหน่งที่ตั้งของแดชบอร์ด",required:""},model:{value:e.createdevice.device_unitname,callback:function(t){e.$set(e.createdevice,"device_unitname",t)},expression:"createdevice.device_unitname"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{label:"ประเภทการแสดงผล",required:"",items:e.device_type_list},model:{value:e.createdevice.device_type,callback:function(t){e.$set(e.createdevice,"device_type",t)},expression:"createdevice.device_type"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{label:"การเข้าถึง",required:"",items:e.device_public_list},model:{value:e.createdevice.device_public,callback:function(t){e.$set(e.createdevice,"device_public",t)},expression:"createdevice.device_public"}})],1)],1)],1),e._v(" "),a("small",[e._v("เครื่องหมาย * หมายถึงข้อมูลที่ต้องกรอก")])],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"pink darken-1",flat:""},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.createDevice},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.edit_dialog,callback:function(t){e.edit_dialog=t},expression:"edit_dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("แก้ใขอุปกรณ์")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"หมายเลขอุปกรณ์",readonly:"",required:""},model:{value:e.createdevice.device_id,callback:function(t){e.$set(e.createdevice,"device_id",t)},expression:"createdevice.device_id"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"ชื่ออุปกรณ์",hint:"กรอกชื่อแดชบอร์ด เช่น บ้าน ที่ทำงาน",required:""},model:{value:e.createdevice.device_name,callback:function(t){e.$set(e.createdevice,"device_name",t)},expression:"createdevice.device_name"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"หน่วยของข้อมูล",hint:"เช่น watt v amp เป็นต้น",required:""},model:{value:e.createdevice.device_unitname,callback:function(t){e.$set(e.createdevice,"device_unitname",t)},expression:"createdevice.device_unitname"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{label:"ประเภทการแสดงผล",required:"",items:e.device_type_list,readonly:""},model:{value:e.createdevice.device_type,callback:function(t){e.$set(e.createdevice,"device_type",t)},expression:"createdevice.device_type"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{label:"การเข้าถึง",required:"",items:e.device_public_list},model:{value:e.createdevice.device_public,callback:function(t){e.$set(e.createdevice,"device_public",t)},expression:"createdevice.device_public"}})],1)],1)],1),e._v(" "),a("small",[e._v("เครื่องหมาย * หมายถึงข้อมูลที่ต้องกรอก")])],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(t){e.edit_dialog=!1}}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.editDevice},nativeOn:{click:function(t){e.edit_dialog=!1}}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"1100px"},model:{value:e.detail_dialog,callback:function(t){e.detail_dialog=t},expression:"detail_dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("การเชื่อมต่ออุปกรณ์กับระบบ")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-card",{attrs:{label:"ในการเชื่อมต่อกับระบบ ให้ทำการใส่ข้อมูลเข้าไปดังต่อไปนี้"}},[e._v('\n                        pubString = "{\\"device_id\\": \\"'+e._s(e.createdevice.device_id)+'\\",\\"value\\": ค่าที่ต้องการส่ง}";'),a("br"),e._v("\n                        String pubStringLength = String(pubString.length(), DEC);"),a("br"),e._v('\n                        client.println("PUT /realtime HTTP/1.1");'),a("br"),e._v('\n                        client.println("Host: '+e._s(this.$store.state.host)+'");'),a("br"),e._v('\n                        client.println("Authorization: JWT '+e._s(e.createdevice.device_token)+'");\n                        client.println("Content-Type: application/json");'),a("br"),e._v('\n                        client.println("Connection: close");'),a("br"),e._v('\n                        client.print("Content-Length: ");'),a("br"),e._v("\n                        client.println(pubStringLength);"),a("br"),e._v("\n                        client.print(pubString);"),a("br")])],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(t){e.detail_dialog=!1}}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.editDevice},nativeOn:{click:function(t){e.detail_dialog=!1}}},[e._v("Save")])],1)],1)],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deletedialog,callback:function(t){e.deletedialog=t},expression:"deletedialog"}},[a("v-card",[a("v-card-title",[e._v('\n            กรุณากรอกข้อความ "'+e._s(e.delete_id)+'" เพื่อยืนยันการลบ\n          ')]),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"กรอกรหัสเพื่อยืนยันการลบ",required:""},model:{value:e.compare_delete,callback:function(t){e.compare_delete=t},expression:"compare_delete"}})],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"black",flat:""},on:{click:function(t){t.stopPropagation(),e.deletedialog=!1}}},[e._v("Close")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.deleteConsole(e.delete_id,!0)}}},[e._v("ลบอุปกรณ์")])],1)],1)],1)],1)},staticRenderFns:[]};var A,R=a("VU/8")(E,T,!1,function(e){a("9TsF")},"data-v-498da1e4",null).exports,D={name:"Global",data:()=>({index:0,dialog:!1,edit_dialog:!1,detail_dialog:!1,displayname:"",photoURL:"",home_id:"jdcekavg",home_data:[],io:null,createdevice:[{home_id:null,device_id:null,device_name:null,device_type:null,device_unitname:null,device_added:null,device_public:null}],windowSize:{x:0,y:0},device_type_list:["แสดงข้อมูล","แผงควบคุม"],device_public_list:["สาธารณะ","ส่วนตัว"],interval:[],value:[],control_value:100,cards:[],topcards:[],now:w()().format("HH:mm"),PA:""}),mounted(){n.auth().onAuthStateChanged(e=>{if(e){var t=[e.email,e.displayName,e.photoURL,e.providerData[0].providerId,e.uid];console.log("user",t),this.$store.commit("updateUser",t)}else this.$router.replace("/"),this.login_dialog=!0});this.windowSize={x:window.innerWidth,y:window.innerHeight},this.add();var e=this;A.on("publiclog",function(t){e.io=t,console.log(e.io)})},methods:{colorMonitor(e,t){let a;return e>75?a="red":e>50?a="orange":e>25?a="yellow":e>0&&(a="green"),t||(a="offline"),a},oncolor:e=>"แบตเตอรี่"==e?"pink darken-3":"แผงโซล่าเซลล์"==e?"purple darken-2":"อุปกรณ์ไฟฟ้า"==e?"teal darken-1":"สวิตซ์"==e?"deep-orange darken-4":"อุณภูมิ"==e?"red darken-1":"ความชื้น"==e?"red darken-1":"เซ็นเซอร์วัดแสง"==e?"red darken-1":void 0,colorSwitch(e,t){let a;return a=e?"green":"red",t||(a="offline"),a},add(){A=io.connect("http://"+this.$store.state.host),console.log("emitting"),A.emit("publicrealtime","")}},created(){this.$store.commit("updatesubTitle",""),this.$store.commit("updatesubText",""),this.$store.commit("updateComponent",0),document.head.querySelector("meta[name=theme-color]").content=this.$store.state.color_component,console.log("changed",this.$store.state.color_component)},destroyed(){console.log("close socket"),A.disconnect()},computed:{orderedDevice_id:function(){return O.a.orderBy(this.io,"device_id")},onresize(){return this.windowSize.y/4}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-flex",[a("v-flex",[a("v-container",{staticClass:"lighten-4 innerstyle h-100",attrs:{"fill-height":"",fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.orderedDevice_id,function(t){return a("v-flex",{key:t.index,attrs:{lg3:"",md3:"",xs6:"",sm6:""}},[a("v-card",{attrs:{"text-xs-center":"",dark:"",color:e.oncolor(t.device_type)}},[a("div",{staticClass:"headline offline--text pt-2"},[e._v("   "+e._s(t.home_name))]),e._v(" "),a("v-card-media",{attrs:{height:e.onresize}},[a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{attrs:{xs12:"","text-xs-center":"",flexbox:""}},["อุปกรณ์ไฟฟ้า"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-lightbulb")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"headline hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"แบตเตอรี่"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-battery-three-quarters")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"headline hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"แผงโซล่าเซลล์"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("far fa-sun")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-2 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"อุณภูมิ"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-thermometer-empty")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-2 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"เซ็นเซอร์วัดแสง"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-sun")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-2 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"ความชื้น"==t.device_type?a("div",[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{staticClass:"headline"},[e._v("fas fa-thermometer-empty")]),a("br"),e._v(" "),a("span",{staticClass:"headline hidden-sm-and-down",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("span",{staticClass:"caption hidden-md-and-up",domProps:{textContent:e._s(t.device_name)}}),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-2 hidden-sm-and-down"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),a("h1",[t.device_status?a("span",{staticClass:"display-1 hidden-md-and-up"},[e._v(e._s(t.value))]):e._e()]),e._v(" "),t.device_status?a("span",{staticClass:"caption offline--text"},[e._v(e._s(t.device_unitname))]):e._e(),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1)],1):e._e(),e._v(" "),"สวิตซ์"==t.device_type?a("div",[a("span",{attrs:{color:e.colorSwitch(t.value,t.device_status)}},[e._v(e._s(t.device_name))]),a("br"),e._v(" "),a("v-divider"),e._v(" "),a("br"),a("br"),e._v(" "),t.device_status?a("v-btn",{staticClass:"elevation-0",attrs:{large:"",dark:"",color:e.colorSwitch(t.value,t.device_status)}},[t.value?a("h1",[e._v("เปิด")]):e._e(),e._v(" "),t.value?e._e():a("h1",[e._v("ปิด")])]):e._e(),e._v(" "),a("br"),e._v(" "),t.device_status?e._e():a("span",{staticClass:"caption offline--text"},[e._v("connection lost")])],1):e._e()])],1)],1)],1)],1)],1)}))],1),e._v(" "),a("br"),a("br"),a("br")],1)],1)},staticRenderFns:[]},N=a("VU/8")(D,F,!1,null,null,null).exports;s.default.use(f.a);var q=new f.a({routes:[{path:"/",name:"Dashboard",component:j},{path:"/Charts",name:"Charts",component:P,props:!0},{path:"/console",name:"Console",component:R},{path:"/Global",name:"Global",component:N}]}),U=a("3EgV"),L=a.n(U),I=(a("7zck"),a("NYxO"));s.default.use(I.a);const G=new I.a.Store({state:{token:"JWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE1MTg0MjQ0OTZ9.tfWYolTORaVRgjZu6sLBIyNr4Ll5fCeabJDMT69hJhU",email:null,displayname:null,photoURL:null,providerId:null,drawer:!0,home_id:"",subtitle:"",subtext:"",value:null,host:"localhost:3000",component:1,color_component:"#FFF",x:0,y:0},mutations:{updateComponent(e,t){e.component=t},updateUser(e,t){e.email=t[0],e.displayName=t[1],e.photoURL=t[2],e.providerId=t[3],e.email=t[4],console.log("commit data",t)},updateDrawer(e,t){e.drawer=t},updatesubTitle(e,t){e.subtitle=t},updatesubText(e,t){e.subtext=t},updateWatcher(e,t){e.home_id=t},updateValue(e,t){e.value=t},updateSize(e,t){e.x=t.x,e.y=t.y},updateColor(e,t){e.color_component=t}}});var W=a("sJst"),H=a.n(W),B={props:{type:{type:String,default:"xls"},data:{type:Array,required:!0},fields:{type:Object,required:!0},title:{default:null},name:{type:String,default:"data.xls"},meta:{type:Array,default:()=>[]}},computed:{idName:function(){return"export_"+(new Date).getTime()}},methods:{generate(){if(!this.data.length)return;let e=this.getProcessedJson(this.data,this.fields);return"csv"==this.type?this.export(this.jsonToCSV(e),this.name,"application/csv"):this.export(this.jsonToXLS(e),this.name,"application/vnd.ms-excel")},export:function(e,t,a){let s=this.base64ToBlob(e,a);H()(s,t,a)},jsonToXLS:function(e){let t="<thead><tr>";if(null!=this.title)if(Array.isArray(this.title))for(var a=0;a<this.title.length;a++)t+='<th colspan="'+Object.keys(e[0]).length+'">'+this.title[a]+"<th></tr><tr>";else t+='<th colspan="'+Object.keys(e[0]).length+'">'+this.title+"<th></tr><tr>";for(let a in e[0])t+="<th>"+a+"</th>";return t+="</tr></thead>",t+="<tbody>",e.map(function(e,a){t+="<tbody><tr>";for(let a in e)t+="<td>"+e[a]+"</td>";t+="</tr></tbody>"}),'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=ProgId content=Excel.Sheet> <meta name=Generator content="Microsoft Excel 11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><table>${table}</table></body></html>'.replace("${table}",t)},jsonToCSV:function(e){var t="";if(null!=this.title)if(Array.isArray(this.title))for(var a=0;a<this.title.length;a++)t+=this.title[a]+"\r\n";else t+=this.title+"\r\n";for(let a in e[0])t+=a+",";return t=t.slice(0,t.length-1),t+="\r\n",e.map(function(e){for(let a in e){let s=e[a]+"";s.match(/[,"\n]/)&&(s='"'+s.replace(/\"/g,'""')+'"'),t+=s+","}t=t.slice(0,t.length-1),t+="\r\n"}),t},getProcessedJson:function(e,t){let a=this.getKeys(e,t),s=[],i=this;return e.map(function(e,t){let o={};for(let t in a){let s=a[t];o[t]=i.getNestedData(s,e)}s.push(o)}),s},getKeys:function(e,t){if(t)return t;let a={};for(let t in e[0])a[t]=t;return a},callItemCallback:function(e,t){return"object"==typeof e&&"function"==typeof e.callback?e.callback(t):t},getNestedData:function(e,t){let a=null,s=("object"==typeof e?e.field:e).split(".");a=t[s[0]];for(let e=1;e<s.length;e++)a=a[s[e]];return a=this.callItemCallback(e,a)},base64ToBlob:function(e,t){let a=window.btoa(window.unescape(encodeURIComponent(e))),s=atob(a),i=s.length,o=new Uint8ClampedArray(i);for(;i--;)o[i]=s.charCodeAt(i);return new Blob([o],{type:t})}}},M={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:this.idName},on:{click:this.generate}},[this._t("default",[this._v("\n\t\tDownload "+this._s(this.name)+"\n\t")])],2)},staticRenderFns:[]},V=a("VU/8")(B,M,!1,null,null,null).exports;s.default.component("downloadExcel",V),s.default.use(L.a,{theme:{primary:"#E0E0E0",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",facebook:"#3b5998",google:"#f7f7f7",online:"#FFFFFF",offline:"#E0E0E0",white:"#FFF",grayz:"#666"}}),s.default.config.productionTip=!1,new s.default({el:"#app",router:q,store:G,JsonExcel:V,components:{App:b},template:"<App/>"})},uslO:function(e,t,a){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(e){return a(o(e))}function o(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(s)},i.resolve=o,e.exports=i,i.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.9eca675b66e4f6ac486e.js.map